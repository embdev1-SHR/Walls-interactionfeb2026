<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Alphabet Explorer - Multiplayer</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0a1a0a;color:white;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;overflow:hidden;-webkit-user-select:none;user-select:none}
.setup{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:24px;z-index:10;background:linear-gradient(135deg,#0a1a0a 0%,#0d2818 50%,#0a1a0a 100%)}
.setup h1{font-size:clamp(28px,4vw,42px);color:#4ade80;font-weight:800}
.setup p{color:rgba(255,255,255,.5);font-size:16px}
.player-btns{display:flex;gap:16px}
.p-btn{width:120px;height:120px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;background:rgba(74,222,128,.08);border:3px solid rgba(74,222,128,.2);border-radius:20px;cursor:pointer;transition:all .3s;color:white;font-size:16px;font-weight:700}
.p-btn:hover{background:rgba(74,222,128,.15);border-color:rgba(74,222,128,.5);transform:scale(1.05)}
.p-btn:active{transform:scale(.95)}
.p-btn .num{font-size:42px;font-weight:800;color:#4ade80}
.back-btn{padding:10px 28px;font-size:14px;font-weight:600;background:rgba(74,222,128,.1);border:2px solid rgba(74,222,128,.3);color:white;border-radius:50px;cursor:pointer;transition:all .3s;margin-top:12px}
.back-btn:hover{background:rgba(74,222,128,.2)}
.game-container{position:fixed;inset:0;display:none;flex-direction:column}
.game-container.active{display:flex}
.game-panels{display:flex;flex:1;min-height:0}
.game-panels iframe{border:none;flex:1;height:100%}
.divider{width:3px;background:rgba(74,222,128,.3);flex-shrink:0}
.player-label{position:absolute;top:4px;font-size:11px;font-weight:700;color:#4ade80;background:rgba(0,0,0,.6);padding:2px 10px;border-radius:0 0 8px 8px;z-index:5;pointer-events:none}
.game-back-bar{flex-shrink:0;display:flex;justify-content:center;padding:8px;background:rgba(0,0,0,.85);border-top:1px solid rgba(74,222,128,.2)}
.game-back-btn{padding:8px 32px;font-size:13px;font-weight:700;background:rgba(74,222,128,.1);border:2px solid rgba(74,222,128,.3);color:white;border-radius:50px;cursor:pointer;transition:all .3s}
.game-back-btn:hover{background:rgba(74,222,128,.2);transform:scale(1.05)}
.game-back-btn:active{transform:scale(.95)}
</style>
</head>
<body>
<audio id="alphabet-explorer-multi-music" preload="auto" loop>
  <source src="../assets/Audio/idoberg-space-chords-loop-310493.mp3" type="audio/mpeg">
</audio>
<div class="setup" id="setup">
  <h1>Alphabet Explorer</h1>
  <p>Choose number of players</p>
  <div class="player-btns">
    <div class="p-btn" data-count="1"><span class="num">1</span>Player</div>
    <div class="p-btn" data-count="2"><span class="num">2</span>Players</div>
    <div class="p-btn" data-count="3"><span class="num">3</span>Players</div>
  </div>
  <button class="back-btn" id="backBtn">Back to Menu</button>
</div>
<div class="game-container" id="gameContainer"></div>
<script>
function startGame(count) {
  document.getElementById('setup').style.display = 'none';
  var container = document.getElementById('gameContainer');
  container.className = 'game-container active';
  container.innerHTML = '';
  var panels = document.createElement('div');
  panels.className = 'game-panels';
  for (var i = 0; i < count; i++) {
    if (i > 0) {
      var div = document.createElement('div');
      div.className = 'divider';
      panels.appendChild(div);
    }
    var wrapper = document.createElement('div');
    wrapper.style.cssText = 'flex:1;position:relative;height:100%';
    var label = document.createElement('div');
    label.className = 'player-label';
    label.style.left = '50%';
    label.style.transform = 'translateX(-50%)';
    label.textContent = 'Player ' + (i + 1);
    wrapper.appendChild(label);
    var iframe = document.createElement('iframe');
    iframe.src = count === 1 ? 'alphabet-explorer.html' : 'alphabet-explorer.html?embed=1';
    iframe.style.cssText = 'border:none;width:100%;height:100%';
    wrapper.appendChild(iframe);
    panels.appendChild(wrapper);
  }
  container.appendChild(panels);
  var bar = document.createElement('div');
  bar.className = 'game-back-bar';
  var btn = document.createElement('button');
  btn.className = 'game-back-btn';
  btn.textContent = 'Back to Menu';
  btn.addEventListener('click', function() { location.href = '../index.html'; });
  btn.addEventListener('touchend', function(e) { e.preventDefault(); location.href = '../index.html'; });
  bar.appendChild(btn);
  container.appendChild(bar);
}
document.querySelectorAll('.p-btn').forEach(function(btn) {
  btn.addEventListener('click', function() { startGame(parseInt(btn.dataset.count)); });
  btn.addEventListener('touchend', function(e) { e.preventDefault(); startGame(parseInt(btn.dataset.count)); });
});
document.getElementById('backBtn').addEventListener('click', function() { location.href = '../index.html'; });
document.getElementById('backBtn').addEventListener('touchend', function(e) { e.preventDefault(); location.href = '../index.html'; });
</script>
<script>
  (function(){
    var audio = document.getElementById('alphabet-explorer-multi-music');
    if(!audio) return;
    window.addEventListener('load', function(){ setTimeout(function(){ try{ audio.volume = 0.5; audio.play().catch(function(){}); }catch(e){} }, 500); });
    function stop(){ try{ audio.pause(); audio.currentTime = 0; }catch(e){} }
    document.addEventListener('click', function(e){ var t = e.target; if(!t) return; if(t.id === 'backBtn' || t.classList && t.classList.contains('game-back-btn')) stop(); }, true);
    window.addEventListener('beforeunload', stop);
  })();
</script>
</body>
</html>
