<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fish Catcher - Underwater Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
        }
        
        body {
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(180deg, #0a2463 0%, #1e3c8b 30%, #2a5298 100%);
            color: white;
            height: 100vh;
            width: 100vw;
            position: relative;
            touch-action: none;
        }
        
        /* Underwater Environment */
        .bubbles {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: floatUp 15s infinite linear;
        }
        
        @keyframes floatUp {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 0.5;
            }
            90% {
                opacity: 0.5;
            }
            100% {
                transform: translateY(-100px) translateX(20px);
                opacity: 0;
            }
        }
        
        .seaweed {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 150px;
            background: linear-gradient(to top, rgba(0, 100, 0, 0.7), transparent);
            z-index: 2;
            pointer-events: none;
        }
        
        /* Game UI */
        .game-ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            pointer-events: none;
            z-index: 50;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            padding: 20px 40px;
        }
        
        .stat-item {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px 30px;
            border-radius: 20px;
            backdrop-filter: blur(8px);
            border: 2px solid rgba(255, 255, 255, 0.15);
            min-width: 180px;
        }
        
        .stat-label {
            font-size: 14px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }
        
        .timer {
            color: #ffd700;
        }
        
        /* Start Screen */
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(10, 36, 99, 0.85);
            backdrop-filter: blur(5px);
            z-index: 200;
            pointer-events: auto;
        }
        
        .start-title {
            font-size: 72px;
            font-weight: 900;
            color: #4fc3f7;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.7);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .start-subtitle {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 60px;
            text-align: center;
            max-width: 800px;
            line-height: 1.5;
        }
        
        .start-btn {
            padding: 25px 80px;
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #4fc3f7, #0288d1);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            pointer-events: auto;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .start-btn:active {
            transform: scale(0.95);
        }
        
        /* Game Over Screen */
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.92);
            padding: 50px 70px;
            border-radius: 24px;
            text-align: center;
            border: 4px solid #4fc3f7;
            box-shadow: 0 0 40px rgba(79, 195, 247, 0.4);
            display: none;
            z-index: 300;
            pointer-events: auto;
            width: 90%;
            max-width: 700px;
        }
        
        .game-over.show {
            display: block;
        }
        
        .game-over h1 {
            font-size: 52px;
            color: #ff6b6b;
            margin-bottom: 16px;
        }
        
        .final-score {
            font-size: 40px;
            color: #4fc3f7;
            margin: 16px 0;
        }
        
        .high-score {
            font-size: 28px;
            color: #ffd700;
            margin-bottom: 30px;
        }
        
        .go-btn {
            margin-top: 20px;
            padding: 18px 50px;
            font-size: 22px;
            font-weight: 700;
            background: linear-gradient(135deg, #4fc3f7, #0288d1);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            pointer-events: auto;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        .go-btn:active {
            transform: scale(0.95);
        }
        
        /* Game Area */
        .game-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
        }
        
        /* Fish Styles - Exact design from provided CSS */
        :root {
            --coilSize: 14px;
            --delayCount: 40ms;
            --scaleMe: 1;
            --scaleFlip: 1;
            --posFlip: 0;
        }
        
        .fish-container {
            position: absolute;
            cursor: pointer;
            z-index: 10;
            pointer-events: auto;
        }
        
        .fish-container.caught {
            animation: caughtAnimation 0.6s forwards;
            pointer-events: none;
        }
        
        @keyframes caughtAnimation {
            0% { 
                transform: scale(1) rotate(0deg); 
                opacity: 1; 
            }
            50% {
                transform: scale(1.3) rotate(180deg);
                opacity: 0.7;
            }
            100% { 
                transform: scale(0.3) rotate(360deg); 
                opacity: 0; 
            }
        }
        
        .fish {
            position: relative;
            width: 300px;
            height: 300px;
            filter: drop-shadow(
                calc(var(--coilSize) * 4) calc(var(--coilSize) / 3) 5px rgba(0, 0, 0, 0.3)
            );
        }
        
        .fish .koiCoil {
            position: absolute;
            width: var(--coilSize);
            height: var(--coilSize);
            background-color: orangered;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            margin-left: calc(var(--coilSize) / -2);
            margin-top: calc(var(--coilSize) / -2);
            transform: scale(var(--scaleMe), var(--scaleMe));
            filter: contrast(200%);
            offset-path: path(
                "M11.7692 229.5C14.552 200.052 7.51901 171.858 -42.8757 170.644C-105.869 169.128 -131.294 76.612 -101.695 51.5872C-72.0955 26.5625 -24.6607 -50.7867 70.5883 51.5872C165.837 153.961 27.7073 131.211 33.0199 183.157C38.3326 235.102 90.3211 195.669 139.274 223.727C188.226 251.785 207.959 299.56 139.274 316.243C70.5883 332.926 41.3685 398.9 81.9726 419.754C122.577 440.608 222 478.524 222 419.754C222 372.738 222 242.432 222 183.157C219.091 129.948 175.78 30.8091 25.8099 59.9288C-161.652 96.3284 -30.3529 119.837 25.8099 141.07C81.9726 162.303 171.529 204.769 126.751 260.506C81.9726 316.243 101.326 362.501 139.274 373.496C177.222 384.492 170.012 464.495 70.5883 462.979C-28.835 461.462 -42.8757 393.015 -42.8757 373.496C-42.8757 238.288 11.7692 293 11.7692 240.506C11.7692 208.05 11.7692 237.336 11.7692 229.5Z"
            );
            animation: fishAnim 20000ms linear infinite;
            box-shadow: calc(var(--coilSize) / -2) calc(var(--coilSize) / -10) 0 white inset;
        }
        
        .fish-container:nth-of-type(2n) .fish {
            transform-origin: top center;
            transform: scale(-1, 1);
            filter: drop-shadow(
                calc(var(--coilSize) * -4) calc(var(--coilSize) / 3) 5px rgba(0, 0, 0, 0.3)
            );
        }
        
        .fish-container:nth-of-type(2n) .koiCoil {
            background-color: white;
            box-shadow: calc(var(--coilSize) / -2) calc(var(--coilSize) / -10) 0 orangered inset;
        }
        
        .fish .koiCoil:nth-of-type(15),
        .fish .koiCoil:nth-of-type(14) {
            background-color: orangered;
        }
        
        .fish-container:nth-of-type(2n) .koiCoil:nth-of-type(15),
        .fish-container:nth-of-type(2n) .koiCoil:nth-of-type(14) {
            background-color: white;
        }
        
        .fish .koiCoil:nth-of-type(15)::after {
            content: ":";
            position: absolute;
            color: black;
            font-weight: 800;
            text-align: center;
            line-height: 60%;
            font-size: calc(var(--coilSize) * 1.2);
        }
        
        .fish .koiCoil:nth-of-type(1)::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 50%;
            top: 25%;
            left: -100%;
            border-radius: var(--coilSize);
            background-color: white;
            transform-origin: center right;
            animation: backFlip 200ms ease-in-out alternate infinite;
        }
        
        .fish .koiCoil:nth-of-type(14) {
            --scaleMe: 1.2;
            animation-delay: calc(var(--delayCount) * 1);
        }
        
        .fish .koiCoil:nth-of-type(13) {
            --scaleMe: 1.35;
            animation-delay: calc(var(--delayCount) * 2);
        }
        
        .fish .koiCoil:nth-of-type(12) {
            --scaleMe: 1.55;
            animation-delay: calc(var(--delayCount) * 3);
        }
        
        .fish .koiCoil:nth-of-type(11) {
            --scaleMe: 1.75;
            animation-delay: calc(var(--delayCount) * 4);
        }
        
        .fish .koiCoil:nth-of-type(10) {
            --scaleMe: 1.9;
            animation-delay: calc(var(--delayCount) * 5);
        }
        
        .fish .koiCoil:nth-of-type(9) {
            --scaleMe: 2;
            animation-delay: calc(var(--delayCount) * 6);
        }
        
        .fish .koiCoil:nth-of-type(8) {
            --scaleMe: 2;
            animation-delay: calc(var(--delayCount) * 7);
        }
        
        .fish .koiCoil:nth-of-type(7) {
            --scaleMe: 2;
            animation-delay: calc(var(--delayCount) * 8);
        }
        
        .fish .koiCoil:nth-of-type(6) {
            --scaleMe: 1.9;
            animation-delay: calc(var(--delayCount) * 9);
        }
        
        .fish .koiCoil:nth-of-type(5) {
            --scaleMe: 1.75;
            animation-delay: calc(var(--delayCount) * 10);
        }
        
        .fish .koiCoil:nth-of-type(4) {
            --scaleMe: 1.55;
            animation-delay: calc(var(--delayCount) * 11);
        }
        
        .fish .koiCoil:nth-of-type(3) {
            --scaleMe: 1.35;
            animation-delay: calc(var(--delayCount) * 12);
        }
        
        .fish .koiCoil:nth-of-type(2) {
            --scaleMe: 1.2;
            animation-delay: calc(var(--delayCount) * 13);
        }
        
        .fish .koiCoil:nth-of-type(1) {
            animation-delay: calc(var(--delayCount) * 14);
        }
        
        .fish .koiCoil:nth-of-type(12)::before,
        .fish .koiCoil:nth-of-type(12)::after {
            content: "";
            position: absolute;
            width: 100%;
            height: 20%;
            top: -10%;
            left: -100%;
            border-radius: var(--coilSize);
            background-color: white;
            transform-origin: center right;
            animation: sideFlip 500ms ease-in-out alternate infinite;
        }
        
        .fish .koiCoil:nth-of-type(12)::after {
            --scaleFlip: -1;
            --posFlip: calc(var(--coilSize) * -1);
        }
        
        @keyframes fishAnim {
            0% {
                offset-distance: 0%;
            }
            100% {
                offset-distance: 100%;
            }
        }
        
        @keyframes backFlip {
            0% {
                transform: rotate(45deg);
            }
            100% {
                transform: rotate(-45deg);
            }
        }
        
        @keyframes sideFlip {
            0% {
                transform: scale(1, var(--scaleFlip)) translateY(var(--posFlip))rotate(80deg);
            }
            100% {
                transform: scale(1, var(--scaleFlip)) translateY(var(--posFlip))rotate(20deg);
            }
        }
        
        /* Points Display */
        .points-display {
            position: absolute;
            font-size: 48px;
            font-weight: 900;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.8);
            pointer-events: none;
            z-index: 100;
            animation: pointsFloat 1s ease-out forwards;
        }
        
        @keyframes pointsFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-80px) scale(1.5);
            }
        }
    </style>
</head>
<body>
    <!-- Underwater Environment -->
    <div class="bubbles" id="bubbles"></div>
    <div class="seaweed"></div>
    
    <!-- Game Area -->
    <div class="game-area" id="gameArea"></div>
    
    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <h1 class="start-title">üê† Fish Catcher üê†</h1>
        <p class="start-subtitle">Catch as many colorful koi fish as you can in 60 seconds!<br>Tap or click on the fish to catch them!</p>
        <button class="start-btn" id="startBtn">START GAME</button>
    </div>
    
    <!-- Game UI -->
    <div class="game-ui">
        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">Score</div>
                <div class="stat-value" id="scoreDisplay">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Time</div>
                <div class="stat-value timer" id="timerDisplay">60</div>
            </div>
        </div>
    </div>
    
    <!-- Game Over Screen -->
    <div class="game-over" id="gameOver">
        <h1>TIME'S UP!</h1>
        <div class="final-score">Score: <span id="finalScore">0</span></div>
        <div class="high-score" id="highScore">High Score: 0</div>
        <button class="go-btn" id="playAgainBtn">PLAY AGAIN</button>
    </div>

    <script>
        // Game variables
        let score = 0;
        let timeLeft = 60;
        let gameRunning = false;
        let fishes = [];
        let highScore = localStorage.getItem('fishHighScore') || 0;
        let spawnInterval = null;
        let timerInterval = null;
        let fishIdCounter = 0;
        
        // DOM elements
        const gameArea = document.getElementById('gameArea');
        const startScreen = document.getElementById('startScreen');
        const startBtn = document.getElementById('startBtn');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const timerDisplay = document.getElementById('timerDisplay');
        const gameOverScreen = document.getElementById('gameOver');
        const finalScoreElement = document.getElementById('finalScore');
        const highScoreElement = document.getElementById('highScore');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const bubblesContainer = document.getElementById('bubbles');
        
        // Initialize high score display
        highScoreElement.textContent = `High Score: ${highScore}`;
        
        // Create bubbles
        function createBubbles() {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const bubble = document.createElement('div');
                    bubble.className = 'bubble';
                    const size = Math.random() * 30 + 10;
                    bubble.style.width = `${size}px`;
                    bubble.style.height = `${size}px`;
                    bubble.style.left = `${Math.random() * 100}%`;
                    bubble.style.animationDuration = `${Math.random() * 10 + 10}s`;
                    bubble.style.animationDelay = `${Math.random() * 5}s`;
                    bubblesContainer.appendChild(bubble);
                    
                    setTimeout(() => {
                        if (bubble.parentNode) {
                            bubble.remove();
                        }
                    }, 25000);
                }, i * 500);
            }
        }
        
        // Start creating bubbles
        createBubbles();
        setInterval(createBubbles, 25000);
        
        // Start game function
        function startGame() {
            gameRunning = true;
            
            // Hide start screen
            startScreen.style.display = 'none';
            
            // Reset game variables
            score = 0;
            timeLeft = 60;
            fishes = [];
            fishIdCounter = 0;
            
            // Clear game area
            gameArea.innerHTML = '';
            
            // Update UI
            updateScore();
            updateTimer();
            
            // Start timers
            spawnInterval = setInterval(spawnFish, 1000);
            timerInterval = setInterval(updateGameTimer, 1000);
            
            // Spawn initial fish
            for (let i = 0; i < 3; i++) {
                setTimeout(() => spawnFish(), i * 300);
            }
        }
        
        // Spawn a fish
        function spawnFish() {
            if (!gameRunning) return;
            
            const fishContainer = document.createElement('div');
            fishContainer.className = 'fish-container';
            fishContainer.dataset.fishId = fishIdCounter++;
            
            // Random position (spawn from edges)
            const side = Math.floor(Math.random() * 4); // 0: left, 1: top, 2: right, 3: bottom
            
            let x, y;
            if (side === 0) { // Left
                x = -300;
                y = Math.random() * (window.innerHeight - 300);
            } else if (side === 1) { // Top
                x = Math.random() * (window.innerWidth - 300);
                y = -300;
            } else if (side === 2) { // Right
                x = window.innerWidth + 50;
                y = Math.random() * (window.innerHeight - 300);
            } else { // Bottom
                x = Math.random() * (window.innerWidth - 300);
                y = window.innerHeight + 50;
            }
            
            fishContainer.style.left = `${x}px`;
            fishContainer.style.top = `${y}px`;
            
            // Create fish HTML structure with exact design
            fishContainer.innerHTML = `
                <div class="fish">
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                    <div class="koiCoil"></div>
                </div>
            `;
            
            // Add event listeners for catching
            fishContainer.addEventListener('click', catchFish);
            fishContainer.addEventListener('touchstart', catchFish, { passive: true });
            
            // Add to game area
            gameArea.appendChild(fishContainer);
            
            // Random target position
            const targetX = Math.random() * (window.innerWidth - 300);
            const targetY = Math.random() * (window.innerHeight - 300);
            const duration = Math.random() * 5000 + 8000; // 8-13 seconds
            
            // Store fish data
            fishes.push({
                element: fishContainer,
                id: fishContainer.dataset.fishId
            });
            
            // Animate fish movement
            fishContainer.style.transition = `left ${duration}ms linear, top ${duration}ms linear`;
            setTimeout(() => {
                fishContainer.style.left = `${targetX}px`;
                fishContainer.style.top = `${targetY}px`;
            }, 50);
            
            // Remove fish after duration
            setTimeout(() => {
                if (fishContainer.parentNode && gameRunning) {
                    fishContainer.remove();
                    fishes = fishes.filter(f => f.id !== fishContainer.dataset.fishId);
                }
            }, duration + 100);
        }
        
        // Catch fish
        function catchFish(event) {
            if (!gameRunning) return;
            
            event.preventDefault();
            event.stopPropagation();
            
            const fishElement = event.currentTarget;
            
            // Check if already caught
            if (fishElement.classList.contains('caught')) return;
            
            // Get click position
            const rect = fishElement.getBoundingClientRect();
            const clickX = rect.left + rect.width / 2;
            const clickY = rect.top + rect.height / 2;
            
            // Add caught animation
            fishElement.classList.add('caught');
            
            // Update score
            const points = 10;
            score += points;
            updateScore();
            
            // Show points display
            const pointsDisplay = document.createElement('div');
            pointsDisplay.className = 'points-display';
            pointsDisplay.textContent = `+${points}`;
            pointsDisplay.style.left = `${clickX}px`;
            pointsDisplay.style.top = `${clickY}px`;
            document.body.appendChild(pointsDisplay);
            
            setTimeout(() => {
                pointsDisplay.remove();
            }, 1000);
            
            // Create bubble particles
            createBubbleParticles(clickX, clickY);
            
            // Remove from array
            fishes = fishes.filter(f => f.element !== fishElement);
            
            // Remove from DOM after animation
            setTimeout(() => {
                if (fishElement.parentNode) {
                    fishElement.remove();
                }
            }, 600);
        }
        
        // Create bubble particles
        function createBubbleParticles(x, y) {
            for (let i = 0; i < 15; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                const size = Math.random() * 20 + 5;
                bubble.style.width = `${size}px`;
                bubble.style.height = `${size}px`;
                bubble.style.left = `${x + (Math.random() - 0.5) * 100}px`;
                bubble.style.top = `${y + (Math.random() - 0.5) * 100}px`;
                bubble.style.position = 'fixed';
                bubble.style.zIndex = '999';
                bubble.style.animation = `floatUp ${Math.random() * 2 + 1}s ease-out forwards`;
                document.body.appendChild(bubble);
                
                setTimeout(() => {
                    if (bubble.parentNode) {
                        bubble.remove();
                    }
                }, 3000);
            }
        }
        
        // Update game timer
        function updateGameTimer() {
            if (!gameRunning) return;
            
            timeLeft--;
            updateTimer();
            
            if (timeLeft <= 10) {
                timerDisplay.style.color = '#ff6b6b';
            }
            
            if (timeLeft <= 0) {
                endGame();
            }
        }
        
        // Update score display
        function updateScore() {
            scoreDisplay.textContent = score;
        }
        
        // Update timer display
        function updateTimer() {
            timerDisplay.textContent = timeLeft;
        }
        
        // End game
        function endGame() {
            gameRunning = false;
            
            // Clear intervals
            if (spawnInterval) {
                clearInterval(spawnInterval);
                spawnInterval = null;
            }
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Remove all fish
            fishes.forEach(fish => {
                if (fish.element.parentNode) {
                    fish.element.remove();
                }
            });
            fishes = [];
            
            // Update final score
            finalScoreElement.textContent = score;
            
            // Update high score if needed
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('fishHighScore', highScore);
                highScoreElement.textContent = `üèÜ New High Score: ${highScore}`;
                highScoreElement.style.color = '#ffd700';
            } else {
                highScoreElement.textContent = `High Score: ${highScore}`;
                highScoreElement.style.color = '#4fc3f7';
            }
            
            // Reset timer color
            timerDisplay.style.color = '#ffd700';
            
            // Show game over screen
            gameOverScreen.classList.add('show');
        }
        
        // Restart game
        function restartGame() {
            gameOverScreen.classList.remove('show');
            startGame();
        }
        
        // Event listeners
        startBtn.addEventListener('click', startGame);
        startBtn.addEventListener('touchstart', function(e) {
            e.preventDefault();
            startGame();
        }, { passive: false });
        
        playAgainBtn.addEventListener('click', restartGame);
        playAgainBtn.addEventListener('touchstart', function(e) {
            e.preventDefault();
            restartGame();
        }, { passive: false });
        
        // Handle window resize
        window.addEventListener('resize', function() {
            fishes.forEach(fish => {
                const rect = fish.element.getBoundingClientRect();
                if (rect.left < -400 || rect.top < -400 || 
                    rect.left > window.innerWidth + 100 || rect.top > window.innerHeight + 100) {
                    if (fish.element.parentNode) {
                        fish.element.remove();
                    }
                }
            });
        });
    </script>
</body>
</html>